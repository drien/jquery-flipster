(function(e){e.fn.flipster=function(t){var n={itemContainer:"ul",itemSelector:"li",style:"coverflow",start:"center",enableKeyboard:!0,enableMousewheel:!0,enableTouch:!0,enableNav:!1,enableNavButtons:!1,onItemSwitch:function(){}},r=e.extend({},n,t),s=e(window);return this.each(function(){function d(){c=0}function v(){n.css("height",o.height());t.css("height","auto");r.style==="carousel"&&n.width(o.width())}function m(){if(r.enableNav&&o.length>1){var n=[],i=[],s=[];o.each(function(){var t=e(this).data("flip-category"),r=e(this).attr("id"),o=e(this).attr("title");if(typeof t!="undefined"&&e.inArray(t,n)<0){n.push(t);s[t]='<li class="flip-nav-category"><a href="#" class="flip-nav-category-link" data-flip-category="'+t+'">'+t+'</a>\n<ul class="flip-nav-items">\n'}if(e.inArray(r,i)<0){i.push(r);link='<a href="#'+r+'" class="flip-nav-item-link">'+o+"</a></li>\n";typeof t!="undefined"?s[t]=s[t]+'<li class="flip-nav-item">'+link:s[r]='<li class="flip-nav-item no-category">'+link}});navDisplay='<ul class="flipster-nav">\n';for(var f in n)s[n[f]]=s[n[f]]+"</ul>\n</li>\n";for(var l in s)navDisplay+=s[l];navDisplay+="</ul>";u=e(navDisplay).prependTo(t);a=u.find("a").on("click",function(t){var n;e(this).hasClass("flip-nav-category-link")?n=o.filter("[data-flip-category='"+e(this).data("flip-category")+"']"):n=e(this.hash);if(n.length){w(n);t.preventDefault()}})}}function g(){if(r.enableNav&&o.length>1){currentItem=e(o[f]);u.find(".flip-nav-current").removeClass("flip-nav-current");a.filter("[href='#"+currentItem.attr("id")+"']").addClass("flip-nav-current");a.filter("[data-flip-category='"+currentItem.data("flip-category")+"']").parent().addClass("flip-nav-current")}}function y(){if(r.enableNavButtons&&o.length>1){t.find(".flipto-prev, .flipto-next").remove();t.append("<a href='#' class='flipto-prev'>Previous</a> <a href='#' class='flipto-next'>Next</a>");t.children(".flipto-prev").on("click",function(e){w("left");e.preventDefault()});t.children(".flipto-next").on("click",function(e){w("right");e.preventDefault()})}}function b(){var t=e(o[f]).addClass("flip-current");o.removeClass("flip-prev flip-next flip-current flip-past flip-future no-transition");if(r.style==="carousel"){o.addClass("flip-hidden");var s=e(o[f+1]),u=e(o[f+2]),a=e(o[f-1]),l=e(o[f-2]);if(f===0){a=o.last();l=a.prev()}else if(f===1)l=o.last();else if(f===o.length-2)u=o.first();else if(f===o.length-1){s=o.first();u=e(o[1])}u.removeClass("flip-hidden").addClass("flip-future");l.removeClass("flip-hidden").addClass("flip-past");s.removeClass("flip-hidden").addClass("flip-next");a.removeClass("flip-hidden").addClass("flip-prev")}else{var c=t.outerWidth()/2,h=0,d=n.width(),m=t.outerWidth(),y=o.index(t)*m/2+c/2;o.removeClass("flip-hidden");for(i=0;i<o.length;i++){var b=e(o[i]),w=b.outerWidth();i<f?b.addClass("flip-past").css({"z-index":i,left:i*w/2+"px"}):i>f&&b.addClass("flip-future").css({"z-index":o.length-i,left:i*w/2+c+"px"})}t.css({"z-index":o.length+1,left:y+"px"});h=y+m/2-d/2;var E=-1*h+"px";if(p){var S=e(".flip-past"),x=e(".flip-future");e(".flip-current").css("zoom","1.0");for(i=0;i<S.length;i++)e(S[i]).css("zoom",100-(S.length-i)*5+"%");for(i=0;i<x.length;i++)e(x[i]).css("zoom",100-(i+1)*5+"%");n.animate({left:E},333)}else n.css("left",E)}t.addClass("flip-current").removeClass("flip-prev flip-next flip-past flip-future flip-hidden");v();g();r.onItemSwitch.call(this)}function w(e){if(o.length>1){e==="left"?f>0?f--:f=o.length-1:e==="right"?f<o.length-1?f++:f=0:typeof e=="number"?f=e:f=o.index(e);b()}}function E(){t.addClass("flipster flipster-active flipster-"+r.style).css("visibility","hidden");n=t.find(r.itemContainer).addClass("flip-items");o=n.find(r.itemSelector).addClass("flip-item flip-hidden").wrapInner("<div class='flip-content' />");var i=!1,u=document.createElement("b");u.innerHTML="<!--[if IE 9]><i></i><![endif]-->";var a=u.getElementsByTagName("i").length===1;if(i||a){p=!0;n.addClass("compatibility")}m();y();r.start&&o.length>1&&(r.start==="center"?!o.length%2?f=o.length/2+1:f=Math.floor(o.length/2):f=r.start);v();t.hide().css("visibility","visible").fadeIn(400,function(){b()});s.resize(function(){v();b()});o.on("click",function(t){e(this).hasClass("flip-current")||t.preventDefault();w(o.index(this))});if(r.enableKeyboard&&o.length>1){s.on("keydown.flipster",function(e){c++;if(c%7!==0&&c!==1)return;var t=e.which;if(t===37){e.preventDefault();w("left")}else if(t===39){e.preventDefault();w("right")}});s.on("keyup.flipster",function(e){c=0})}r.enableMousewheel&&o.length>1&&t.on("mousewheel.flipster",function(e){h=window.setTimeout(d,500);c++;if(c%4!==0&&c!==1)return;window.clearTimeout(h);e.originalEvent.wheelDelta/120>0?w("left"):w("right");e.preventDefault()});if(r.enableTouch&&o.length>1){t.on("touchstart.flipster",function(e){l=e.originalEvent.targetTouches[0].screenX});t.on("touchmove.flipster",function(e){e.preventDefault();var t=e.originalEvent.targetTouches[0].screenX,n=t-l;if(n>o[0].clientWidth/1.75){w("left");l=t}else if(n<-1*(o[0].clientWidth/1.75)){w("right");l=t}});t.on("touchend.flipster",function(e){l=0})}}var t=e(this),n,o,u,a,f=0,l=0,c=0,h,p;t.hasClass("flipster-active")||E()})}})(jQuery);